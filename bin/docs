#!/bin/sh

EMACS="${EMACS:=emacs}"

cat <<INFO
════════════════════════════════════════════════════════════════════════════════
 _____ _____ ____
| ____|_   _|  _ \\
|  _|   | | | | | |
| |___ _| |_| |_| |
|_____(_)_(_)____(_)

     _
  __| | ___   ___ ___
 / _\` |/ _ \ / __/ __|
| (_| | (_) | (__\\__ \\
 \\__,_|\\___/ \\___|___/

════════════════════════════════════════════════════════════════════════════════
$("$EMACS" --version)
════════════════════════════════════════════════════════════════════════════════
INFO

"$EMACS" --batch \
  -eval "(add-to-list 'load-path \".\")" \
  -l ert \
  -l etd.el \
  -l examples/etd-examples.el \
  --eval "(etd-create-docs-file-for \"examples/etd-examples.el\" \"etd-examples-template\" \"docs.md\")"
exitcode=$?

echo "
════════════════════════════════════════════════════════════════════════════════"

cat docs.md

exit $exitcode
